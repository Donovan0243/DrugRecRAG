# 向量检索测试结果分析

## 测试结果分析

### ✅ 好的结果

1. **"急性胃肠炎" 在 diseasekb**：
   - 第1个候选："急性胃肠炎"（1.0000）- **完全匹配** ✅
   - 这说明 diseasekb 中确实有"急性胃肠炎"节点
   - 向量检索工作正常

2. **"肚子疼" 在 cmekg**：
   - 第1个候选："腹痛"（0.8670）- **合理** ✅
   - "肚子疼"和"腹痛"语义相似，匹配正确

### ⚠️ 有问题的地方

1. **"急性胃肠炎" 在 cmekg**：
   - 第1个候选："急性胃炎"（0.9386）- 相似但不对
   - 没有找到"急性胃肠炎"本身
   - **可能原因**：CMeKG中可能没有"急性胃肠炎"这个节点，或者名称不同
   - **建议**：检查CMeKG中是否有"急性胃肠炎"节点

2. **"拉肚子" 在 cmekg**：
   - 只找到："孕妇拉肚子"（0.7547）- **不合理** ❌
   - 应该匹配到"腹泻"，但没找到
   - **可能原因**：
     - "腹泻"节点不在索引中（可能不是Symptom节点？）
     - "腹泻"的向量相似度低于0.75阈值
     - 需要检查CMeKG中"腹泻"的节点类型

3. **"黄连素" 在 cmekg**：
   - 未找到匹配 - **可能是合理**（取决于KG中是否有）
   - **可能原因**：
     - "黄连素"可能不在CMeKG的Drug节点中
     - 或者有但名称不同（如"盐酸小檗碱"）
     - 需要检查CMeKG中是否有相关药物节点

## 阈值分析

当前阈值：**0.75**

- "拉肚子" -> "孕妇拉肚子"（0.7547）刚好通过阈值
- "黄连素"未找到，说明最高相似度 < 0.75

**建议调整**：
- 如果发现很多应该匹配但没匹配到的，可以**降低阈值到0.70**
- 但要注意误匹配风险

## 需要检查的问题

1. **CMeKG中是否有"腹泻"节点？**
   - 如果有，为什么"拉肚子"没匹配到？
   - 节点类型是什么？

2. **CMeKG中是否有"急性胃肠炎"节点？**
   - 如果有，为什么没匹配到？
   - 节点名称是什么？

3. **CMeKG中是否有"黄连素"相关节点？**
   - 如果有，节点名称是什么？
   - 是否是Drug类型？

## 下一步

1. **检查KG中的实际节点**：
   ```cypher
   # 检查是否有"腹泻"
   MATCH (n) WHERE toLower(n.name) CONTAINS "腹泻" RETURN n.name, labels(n)
   
   # 检查是否有"急性胃肠炎"
   MATCH (n) WHERE toLower(n.name) CONTAINS "急性胃肠炎" RETURN n.name, labels(n)
   
   # 检查是否有"黄连素"
   MATCH (n) WHERE toLower(n.name) CONTAINS "黄连素" RETURN n.name, labels(n)
   ```

2. **调整阈值**（如果需要）：
   - 如果发现很多应该匹配但阈值过滤掉的，可以降低到0.70
   - 但要注意误匹配

3. **检查索引完整性**：
   - 确认所有Drug/Symptom/Disease节点都被索引了
   - 检查是否有节点没有name字段被跳过了

